{% extends 'efssad_front/master.html' %}

{% block body %}

<body>

<!--  -->
<script>
function viewPlan(){
    var rows = document.getElementsByTagName("tr");
    
}
</script>

<div class="container">
    <h2>Mission List</h2>
    <table class="table table-hover">
        <thead style="background:black; color: white; height: 50px;">
            <tr>
                <th scope="col" class="col-md-1">ID</th>
                <th scope="col" class="col-md-1">Level</th>
                <th scope="col" class="col-md-4">Description</th>
                <th scope="col" class="col-md-2">Datetime</th>
                <th scope="col" class="col-md-1">Status</th>
                <th scope="col" class="col-md-1">Action</th>
            </tr>
        </thead>
        <tbody>
        {% for mission in all_missions reversed %}
            <tr>
                <th scope="row">{{ mission.missionID }}</th>
                <td>{{ mission.level }}</td>
                <td>{{ mission.description }}</td>
                <td>{{ mission.datetimeReceived }}</td>
                <td><span class="label label-default" style="font-size: 14px" id="missionStatus{{ mission.missionID }}">{{ mission.status }}</span></td>

                {% if mission.level == 3 %}
                <td><button type="button" class="btn btn-primary active" data-toggle="modal" data-target="#myModal1">View Plan</button></td>
                {% else %}
                 <td><input type="button" class="btn btn-primary active" onclick="location.href='/deployment/{{ mission.missionID }}';" value="Deploy"/></td>
                {% endif %}

                <!-- Modal -->
                <div id="myModal1" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Modal Header</h4>
                            </div>
                            <div class="modal-body">
                                <p>Some text in the modal.</p>
                            </div>
                            <div class="modal-footer">
                                <input type="button" class="btn btn-primary active" onclick="location.href='/deployment/{{ mission.missionID }}';" value="Deploy"/>
                            </div>
                        </div>

                    </div>
                </div>
            </tr>

        {% endfor %}
        </tbody>
    </table>

      <!-- script for different span color -->
    <script>
        var status1 = document.querySelectorAll('*[id^="missionStatus"]');
        document.write(status1.value);
        status = status1.innerHTML.toLowerCase();
        <!--var status = document.getElementById('missionStatus').innerHTML.toLowerCase();-->

        status = status.replace(/\s/g,'');
        if(status == "new"){
            document.getElementById("missionStatus").className = "label label-success";
        }
        if(status == "ongoing"){
            document.getElementById("missionStatus").className = "label label-warning";
        }
        if(status == "cleanup"){
            document.getElementById("missionStatus").className = "label label-info";
        }

        if(status == "complete"){
            document.getElementById("missionStatus").className = "label label-default";
        }

        if(status == "completed"){
            document.getElementById("missionStatus").className = "label label-default";
        }


    </script>

    <table class="table table-hover">
        <thead style="background:black; color: white; height: 50px;">
            <tr>
                <th scope="col" class="col-md-1">ID</th>
                <th scope="col" class="col-md-1">Level</th>
                <th scope="col" class="col-md-4">Description</th>
                <th scope="col" class="col-md-2">Datetime</th>
                <th scope="col" class="col-md-1">Status</th>
                <th scope="col" class="col-md-1">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">1</th>
                <td>3</td>
                <td>Zombie Invasion</td>
                <td>11-02-2018 18:00</td>
                <td><span class="label label-warning" style="font-size: 14px">New</span></td>
                <td><button type="button" class="btn btn-primary active" data-toggle="modal" data-target="#myModal">View Plan</button></td>

                <!-- Modal -->
                <div id="myModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Modal Header</h4>
                            </div>
                            <div class="modal-body">
                                <p>Some text in the modal.</p>
                            </div>
                            <div class="modal-footer">
                                <input type="button" class="btn btn-primary active" onclick="location.href='/deployment';" value="Deploy"/>
                            </div>
                        </div>

                    </div>
                </div>
            </tr>
            <tr>
                <th scope="row">1</th>
                <td>1</td>
                <td>Fire at Tampines</td>
                <td>11-02-2018 18:00</td>
                <td><span class="label label-warning" style="font-size: 14px">New</span></td>
                <td><input type="button" class="btn btn-primary active" onclick="location.href='/deployment';" value="Deploy"/></td>
            </tr>
            <tr>
                <th scope="row">1</th>
                <td>2</td>
                <td>Riot at Yishun</td>
                <td>11-02-2018 18:00</td>
                <td><span class="label label-warning" style="font-size: 14px">Clean Up</span></td>
                <td><input type="button" class="btn btn-primary active" onclick="location.href='/deployment';" value="Deploy"/></td>
            </tr>
            <tr>
                <th scope="row">1</th>
                <td>3</td>
                <td>Zombie Invasion</td>
                <td>11-02-2018 18:00</td>
                <td><span class="label label-warning" style="font-size: 14px">Ongoing</span></td>
                <td><button type="button" class="btn btn-primary active" data-toggle="modal" data-target="#myModal">View Plan</button></td>
            </tr>
        </tbody>
    </table>


</div>
</body>

{% endblock %}
